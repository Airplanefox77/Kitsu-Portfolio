<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kitsu ‚Äî Portfolio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --glass: rgba(255,255,255,.16);
      --stroke: rgba(255,255,255,.28);
      --pink: #ff4fd8;
      --blue: #5ac8ff;
      --purple: #A200FF;

      /* responsive background sizes using clamp */
      --bg1-w: clamp(320px, 40vw, 900px);
      --bg1-h: clamp(260px, 35vh, 640px);
      --bg2-w: clamp(300px, 36vw, 800px);
      --bg2-h: clamp(240px, 40vh, 680px);
    }

    html,body{height:100%; margin:0; padding:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}

    /* Background: no-repeat, responsive sizes, fixed placement */
    body{
      min-height:100vh;
      background-color:#0b0f14;
      background-image:
        radial-gradient(circle at 10% 10%, rgba(255,79,216,.22) 0%, rgba(255,79,216,.12) 20%, transparent 55%),
        radial-gradient(circle at 90% 20%, rgba(90,200,255,.20) 0%, rgba(90,200,255,.10) 25%, transparent 60%);
      background-repeat: no-repeat, no-repeat;
      background-attachment: fixed, fixed;
      background-size: var(--bg1-w) var(--bg1-h), var(--bg2-w) var(--bg2-h);
      color: #f7f9fc;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Make container centered & responsive */
    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: clamp(18px, 4vw, 32px);
    }

    .glass{
      background: var(--glass);
      backdrop-filter: blur(12px) saturate(125%);
      -webkit-backdrop-filter: blur(12px) saturate(125%);
      border: 1px solid var(--stroke);
      box-shadow: 0 8px 28px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.06);
    }

    .accent-text{ background: linear-gradient(90deg, var(--pink), var(--blue)); -webkit-background-clip: text; background-clip: text; color: transparent; }

    /* Responsive typography with clamp */
    h1{ font-weight:800; font-size: clamp(1.6rem, 4.6vw, 3.2rem); line-height:1.02; margin:0; }
    h2{ font-size: clamp(1.1rem, 2.4vw, 1.5rem); margin:0 0 .6rem 0; }
    p, li, a { font-size: clamp(.86rem, 1.8vw, 1rem); }

    .tag{ border:1px solid rgba(255,255,255,.20); display:inline-block; padding:.35rem .6rem; border-radius:999px; background: rgba(255,255,255,.02); }

    /* layout */
    header.sticky{ position: sticky; top:12px; z-index:40; }
    .topbar { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:.6rem; border-radius:18px; }
    nav a{ margin-left:1rem; color: rgba(255,255,255,.85); text-decoration:none; position:relative; }
    nav a::after{ content:""; position:absolute; left:0; bottom:-4px; width:0; height:2px; background: linear-gradient(90deg,var(--pink),var(--blue)); transition:width .22s; border-radius:999px; opacity:.95; }
    nav a:hover::after{ width:100%; }

    /* hero */
    .hero { display:flex; flex-direction:column; gap:18px; align-items:stretch; }
    @media(min-width:880px){
      .hero { flex-direction:row; align-items:center; }
    }
    .hero-left{ flex:1; }
    .hero-right{ width:100%; max-width:320px; }

    /* cards grid */
    .grid-3 { display:grid; gap:18px; grid-template-columns: 1fr; }
    @media(min-width:900px){ .grid-3 { grid-template-columns: repeat(3, 1fr); } }

    /* small interactive niceties */
    .work-card { transition: transform .14s ease, box-shadow .14s ease; cursor:pointer; }
    .work-card:hover { transform: translateY(-6px); box-shadow: 0 20px 40px rgba(0,0,0,.35); }

    /* editable outline & button styles */
    [contenteditable="true"]{ outline: 2px dashed rgba(255,255,255,.14); outline-offset:6px; border-radius:8px; padding:2px; }
    .hidden { display:none !important; }

    /* subtle scrollbar */
    ::-webkit-scrollbar{ width:9px; height:9px; }
    ::-webkit-scrollbar-thumb{ background: linear-gradient(var(--pink), var(--blue)); border-radius:999px; opacity:.9; }

    /* small utility */
    .muted { color: rgba(255,255,255,.72); }
    .btn { padding:.5rem .9rem; border-radius:12px; border:1px solid rgba(255,255,255,.08); background: rgba(255,255,255,.02); cursor:pointer; }
  </style>
</head>
<body>
  <div class="container">
    <header class="sticky">
      <div class="glass topbar">
        <div style="display:flex; align-items:center; gap:10px;">
          <div style="width:44px;height:44px;border-radius:999px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--pink),var(--blue)); font-weight:700; color:#000;">K</div>
          <div class="muted" style="font-size:.95rem">Pink & Blue ‚ú¶ Glass ‚ú¶ Editable</div>
        </div>
        <nav class="hidden sm:block" aria-label="Main navigation">
          <a href="#about">About</a>
          <a href="#work">Work</a>
          <a href="#contact">Contact</a>
        </nav>
        <div style="display:flex; gap:8px; align-items:center;">
          <button id="editBtn" class="btn hidden" title="Edit (requires password)">‚úèÔ∏è Edit</button>
        </div>
      </div>
    </header>

    <!-- hero -->
    <section class="hero" style="margin-top:18px;">
      <div class="glass hero-left" style="padding: clamp(18px,3.5vw,32px); border-radius:20px;">
        <h1>Hewwo, I'm <span class="accent-text">Kitsu</span> <span class="muted" data-edit-key="tagline" contenteditable="false">‚Äî a creative fox who writes, draws, and codes lil' toys :3</span></h1>
        <p style="margin-top:10px" data-edit-key="intro" contenteditable="false">I make cozy stories, pencil sketches, and playful web tools. I also tinker with Discord status apps and game UIs.</p>
        <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
          <span class="tag" data-edit-key="tag1" contenteditable="false">Writing</span>
          <span class="tag" data-edit-key="tag2" contenteditable="false">Art</span>
          <span class="tag" data-edit-key="tag3" contenteditable="false">Code</span>
          <span class="tag" data-edit-key="tag4" contenteditable="false">Roblox</span>
        </div>
        <div style="margin-top:14px; display:flex; gap:10px; align-items:center;">
          <a class="btn" href="#work">See my work ‚Üí</a>
          <button id="secretBow" class="btn" title=":3">üéÄ</button>
        </div>
      </div>

      <aside class="glass hero-right" style="padding:16px; border-radius:20px;">
        <div class="muted">Currently</div>
        <div style="margin-top:8px; font-weight:600" data-edit-key="current" contenteditable="false">Building AGS ‚Äî a Discord Rich Presence tool</div>
        <div style="margin-top:6px" data-edit-key="current-desc" contenteditable="false">Auto-detects supported games and updates status with rich details.</div>
      </aside>
    </section>

    <!-- about -->
    <section id="about" style="margin-top:22px;">
      <div style="display:grid; gap:16px; grid-template-columns:1fr; align-items:start;">
        <article class="glass" style="padding:16px; border-radius:18px;">
          <h2>About me</h2>
          <p data-edit-key="about" contenteditable="false" class="muted" style="margin-top:8px">
            I'm Kitsu (he/they) ‚Äî a fluffy white & pink fox who loves crafting worlds, sketching with pencil & paper, and chatting with friends on Discord. I enjoy building small, delightful tools and learning new tricks along the way.
          </p>
          <ul style="margin-top:10px; color:var(--muted);">
            <li>‚ú® <span data-edit-key="about-1" contenteditable="false">I write the 'Void Saga' and tinker with lore.</span></li>
            <li>üñäÔ∏è <span data-edit-key="about-2" contenteditable="false">I draw characters and outfit concepts (bows!!).</span></li>
            <li>üïπÔ∏è <span data-edit-key="about-3" contenteditable="false">I play Roblox (Madcity, PlaneCrazy, KnifeFight).</span></li>
          </ul>
        </article>

        <aside class="glass" style="padding:16px; border-radius:18px;">
          <h3>Quick links</h3>
          <ul style="margin-top:8px; line-height:1.9;">
            <li>üåê <a class="muted" href="#" data-edit-key="link-1" contenteditable="false">Website / GitHub</a></li>
            <li>üì∑ <a class="muted" href="#" data-edit-key="link-2" contenteditable="false">Art Gallery</a></li>
            <li>üí¨ <a class="muted" href="#" data-edit-key="link-3" contenteditable="false">Discord: @Kitsu</a></li>
          </ul>
        </aside>
      </div>
    </section>

    <!-- work -->
    <section id="work" style="margin-top:20px;">
      <div style="display:flex; align-items:center; justify-content:space-between;">
        <h2>Selected work</h2>
        <div class="muted" style="font-size:.82rem">Click a card to expand</div>
      </div>

      <div class="grid-3" style="margin-top:12px;">
        <article class="glass work-card" data-card style="padding:14px;border-radius:16px;">
          <h3 contenteditable="false" data-edit-key="w1-title">AGS ‚Äî Advanced Game Status</h3>
          <p class="muted" data-edit-key="w1-desc" contenteditable="false" style="margin-top:8px">Discord Rich Presence tool that auto-detects games and updates details like mission/location.</p>
          <div style="margin-top:10px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="tag" data-edit-key="w1-tag1" contenteditable="false">TypeScript</span>
            <span class="tag" data-edit-key="w1-tag2" contenteditable="false">Desktop</span>
          </div>
        </article>

        <article class="glass work-card" data-card style="padding:14px;border-radius:16px;">
          <h3 contenteditable="false" data-edit-key="w2-title">Void Saga ‚Äî Writing</h3>
          <p class="muted" data-edit-key="w2-desc" contenteditable="false" style="margin-top:8px">A group of kids meets Vortex in The Void ‚Äî searching for Voreluim crystals and new worlds.</p>
          <div style="margin-top:10px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="tag" data-edit-key="w2-tag1" contenteditable="false">Worldbuilding</span>
            <span class="tag" data-edit-key="w2-tag2" contenteditable="false">Draft</span>
          </div>
        </article>

        <article class="glass work-card" data-card style="padding:14px;border-radius:16px;">
          <h3 contenteditable="false" data-edit-key="w3-title">Sketchbook ‚Äî Characters</h3>
          <p class="muted" data-edit-key="w3-desc" contenteditable="false" style="margin-top:8px">Pencil-and-paper designs: bows, hoodies with sakura sleeves, and expressive foxes.</p>
          <div style="margin-top:10px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="tag" data-edit-key="w3-tag1" contenteditable="false">Art</span>
            <span class="tag" data-edit-key="w3-tag2" contenteditable="false">Pencil</span>
          </div>
        </article>
      </div>
    </section>

    <!-- contact -->
    <section id="contact" style="margin-top:20px; margin-bottom:36px;">
      <div class="glass" style="padding:14px;border-radius:16px;">
        <h2>Let's talk</h2>
        <p class="muted" data-edit-key="contact-msg" contenteditable="false" style="margin-top:8px">Wanna collab or just say hi? Drop a message on Discord or send an email. I don't bite, I just nibble fwuit. owo</p>
        <div style="margin-top:12px; display:grid; grid-template-columns:1fr 1fr; gap:8px;">
          <a class="glass btn" href="#" data-edit-key="contact-1" contenteditable="false">üìß kitsu@example.com</a>
          <a class="glass btn" href="#" data-edit-key="contact-2" contenteditable="false">üí¨ Discord: @Kitsu</a>
        </div>
      </div>
    </section>

    <footer style="margin-top:16px; margin-bottom:30px;">
      <div class="glass" style="padding:10px;border-radius:14px; display:flex; justify-content:space-between; align-items:center;">
        <div>¬© <span id="year"></span> Kitsu</div>
        <div style="display:flex; gap:8px;">
          <button id="saveBtn" class="btn hidden">Save</button>
          <button id="cancelBtn" class="btn hidden">Cancel</button>
          <button id="resetBtn" class="btn hidden">Reset</button>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // client-side: no secret here. The server verifies the password using PORTFOLIO_SECRET.
    const editBtn = document.getElementById('editBtn');
    const secretBow = document.getElementById('secretBow');
    const saveBtn = document.getElementById('saveBtn');
    const cancelBtn = document.getElementById('cancelBtn');
    const resetBtn = document.getElementById('resetBtn');
    const yearEl = document.getElementById('year');
    yearEl.textContent = new Date().getFullYear();

    const editables = Array.from(document.querySelectorAll('[data-edit-key]'));

    function setEditing(on){
      editables.forEach(el => el.contentEditable = on ? 'true' : 'false');
      saveBtn.classList.toggle('hidden', !on);
      cancelBtn.classList.toggle('hidden', !on);
      resetBtn.classList.toggle('hidden', !on);
      document.body.classList.toggle('editing', on);
    }

    // call server /auth endpoint
    async function askPassword(){
      const input = prompt('Enter the secret to edit (hint: bow):');
      if(!input) return false;
      try{
        const r = await fetch('/auth', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ password: input })
        });
        if(r.ok){ return true; }
        const body = await r.json().catch(()=>({}));
        alert(body?.error || 'Wrong secret.');
        return false;
      }catch(err){
        console.error(err);
        alert('Could not reach server to verify secret.');
        return false;
      }
    }

    function loadSaved(){
      const saved = JSON.parse(localStorage.getItem('kitsu-portfolio')||'{}');
      editables.forEach(el=>{
        const key = el.dataset.editKey;
        if(saved[key] !== undefined) el.innerHTML = saved[key];
      });
    }
    function saveAll(){
      const data = {};
      editables.forEach(el => data[el.dataset.editKey] = el.innerHTML);
      localStorage.setItem('kitsu-portfolio', JSON.stringify(data));
    }
    function resetAll(){
      if(!confirm('Reset all edits back to default?')) return;
      localStorage.removeItem('kitsu-portfolio');
      location.reload();
    }

    // expand cards
    document.querySelectorAll('[data-card]').forEach(card=>{
      card.addEventListener('click', ()=> {
        card.classList.toggle('expanded');
        card.style.transform = card.classList.contains('expanded') ? 'scale(1.02)' : '';
      });
    });

    // entry points
    secretBow.addEventListener('click', async ()=>{
      if(await askPassword()) setEditing(true);
    });
    editBtn.addEventListener('click', async ()=>{
      if(await askPassword()) setEditing(true);
    });

    // Ctrl/Cmd + E
    window.addEventListener('keydown', async (e)=>{
      if((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'e'){
        e.preventDefault();
        if(document.body.classList.contains('editing')) setEditing(false);
        else if(await askPassword()) setEditing(true);
      }
    });

    // buttons
    saveBtn.addEventListener('click', ()=>{ saveAll(); setEditing(false); alert('Saved locally ‚ú®'); });
    cancelBtn.addEventListener('click', ()=>{ setEditing(false); loadSaved(); });
    resetBtn.addEventListener('click', resetAll);

    // autosave on blur when editing
    document.addEventListener('focusout', (e)=>{
      if(document.body.classList.contains('editing') && e.target?.dataset?.editKey) saveAll();
    });

    // persist on reload
    loadSaved();

    // show edit button when hovering top bar (hint)
    const header = document.querySelector('header');
    header.addEventListener('mouseenter', ()=> editBtn.classList.remove('hidden'));
    header.addEventListener('mouseleave', ()=> editBtn.classList.add('hidden'));
  </script>
</body>
</html>
